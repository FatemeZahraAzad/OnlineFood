<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <title>Document</title>
{% load static %}
<link rel="stylesheet" href="{% static 'css/reset.css'%}" type="text/css" media="all">
<link rel="stylesheet" href="{% static 'css/layout.css'%}" type="text/css" media="all">
<link rel="stylesheet" href="{% static 'css/style.css'%}" type="text/css" media="all">
<link rel="stylesheet" href="{% static 'css/zerogrid.css'%}" type="text/css" media="all">
<link rel="stylesheet" href="{% static 'css/responsive.css'%}" type="text/css" media="all"> 
<link rel="stylesheet" href="{% static 'css/contactform.css'%}" type="text/css" media="all">
<link rel="stylesheet" href="{% static 'main.css'%}" type="text/css" media="all">

</head>
<body id="page5">
<div class="body6">
	<div class="body1">
		<div class="main zerogrid">
			<header>
				<nav class='col-12'>
					<ul id="menu" class='col-sm-7'>
						<li class="active"><a style="font-size:15px;" href="{%url 'add_to_cart'%}">Cart</a></li>
						<li class="active"><a style="font-size:15px;" href="{% url 'account_login' %}">LogIn</a></li>
						<li class="active"><a style="font-size:15px;" href="{% url 'account_logout' %}">LogOut</a></li>
						<li class="active"><a style="font-size:15px;" href="{%url 'home'%}">Home</a></li>
						<li class="active"><a style="font-size:15px;" href="{%url 'add_manager'%}">Managers SignUp</a></li>
						<li class="active"><a style="font-size:15px;" href="{% url 'add_customer' %}">Customers SignUp</a></li>
						<li class="active"><a style="font-size:15px;" href="{% url 'customer_panel' %}">Customers Panel</a></li>
						
						{% block nav %}{% endblock nav %}
					</ul>
					<div class="row">
						<div class="col-6 align-left">
						  <i id="search-icon" class="fas fa-search"></i>
						  <input id="user-input" placeholder="Search">
						</div>
						<div id="replaceable-content" class="col-6">
						  {% include 'search/search.html' %}
						</div>
					  </div>
				</nav>
			</header>
			
			<main>
				{% block content %}
				{% endblock content %}
			</main>
				
				<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
				<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
				<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
				<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
				<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
				<main>{% block js %}{% endblock js %}</main>
				{% block script %}{% endblock script %}
				<script>

					const user_input = $("#user-input")
					const search_icon = $('#search-icon')
					const artists_div = $('#replaceable-content')
					const endpoint = '/search/'
					const delay_by_in_ms = 700
					let scheduled_function = false

					let ajax_call = function (endpoint, request_parameters) {
						$.getJSON(endpoint, request_parameters)
							.done(response => {
								// fade out the artists_div, then:
								artists_div.fadeTo('slow', 0).promise().then(() => {
									// replace the HTML contents
									artists_div.html(response['html_from_view'])
									// fade-in the div with new contents
									artists_div.fadeTo('slow', 1)
									// stop animating search icon
									search_icon.removeClass('blink')
								})
							})
					}
					user_input.on('keyup', function () {

						const request_parameters = {
							q: $(this).val() // value of user_input: the HTML element with ID user-input
						}

						// start animating the search icon with the CSS class
						search_icon.addClass('blink')

						// if scheduled_function is NOT false, cancel the execution of the function
						if (scheduled_function) {
							clearTimeout(scheduled_function)
						}

						// setTimeout returns the ID of the function to be executed
						scheduled_function = setTimeout(ajax_call, delay_by_in_ms, endpoint, request_parameters)
					})




				</script>
</body>
</html>